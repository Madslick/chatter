version: "3"
services:
  mongodb:
    image: 'mongo'
    volumes: 
      - grpc-data:/data/db
    environment: 
      MONGO_INITDB_ROOT_USERNAME: grpc
      MONGO_INITDB_ROOT_PASSWORD: grpc

  chit-chat-go-client:
    container_name: chit-chat-go-client
    build: 
      context: ./chit-chat-go-client
      dockerfile: ../dockerfiles/chit-chat-go-client
    volumes:
      - ./chit-chat-go-client:/go/src/chit-chat-go-client
      - /root/.vscode-server/extensions
    stdin_open: true
    tty: true

  chit-chat-go:
    container_name: chit-chat-go
    build: 
      context: ./chit-chat-go
      dockerfile: ../dockerfiles/chit-chat-go
    volumes:
      - ./chit-chat-go:/go/src/chit-chat-go
      - /root/.vscode-server/extensions
    stdin_open: true
    tty: true
volumes:
  grpc-data:
